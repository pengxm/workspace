require(["dojo/dom","dojo/on","dojo/dom-style","dojo/query","dojo/dom-class","dojo/fx","dojo/dom-attr","dojo/_base/fx","dojo/request/script","dojo/json","dojo/ready"],    function(dom, on, domStyle, query, domClass, coreFx, domAttr, fx, script, JSON, ready){        ready(function(){            initShake();            initTab();        });        function initTab(){            var n = 10;            var timer = null;            on(dom.byId('ruleLi'), 'click', function(){                clearInterval(timer);                domClass.remove(dom.byId('record'), 'act');                domClass.add(dom.byId('rule'), 'act');            });            on(dom.byId('recordLi'), 'click', function(){                domClass.remove(dom.byId('rule'), 'act');                domClass.add(dom.byId('record'), 'act');                clearInterval(timer);                var h = dom.byId('scrollUl').clientHeight;                if(h>125){                    timer = setInterval(function(){                        n+=1;                        if(n>(h-100)){n=-10;}                        domStyle.set('scrollUl', 'top', -n+'px');                    },50);                }            });        }        var flag = true;        var SHAKE_THRESHOLD = 3000;        var last_update = 0;        var x = y = z = last_x = last_y = last_z = 0;        function initShake() {            if (window.DeviceMotionEvent) {                window.addEventListener('devicemotion', deviceMotionHandler, false);            } else {                alert('not support mobile event');            }        }        function deviceMotionHandler(eventData) {            var acceleration = eventData.accelerationIncludingGravity;            var curTime = new Date().getTime();            var audio = document.getElementById("shakemusic");            var openAudio = document.getElementById("openmusic");            if ((curTime - last_update) > 100) {                var diffTime = curTime - last_update;                last_update = curTime;                x = acceleration.x;                y = acceleration.y;                z = acceleration.z;                var speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 10000;                if (speed > SHAKE_THRESHOLD) {                    if (flag == true){                        audio.play();                        domClass.add(dom.byId('hand'), 'wobble');                        setTimeout(function(){                            audio.pause();                            openAudio.play();                            // domClass.add(dom.byId('popup'), 'act');                            // on(dom.byId('btn'), 'click', function(){                            //     domStyle.set(dom.byId('popup'), 'display', 'none');                            // });                            // flag = false;                        }, 1500);                        two();                        flag = false;                    } else {                        alert(123);                    }                }                last_x = x;                last_y = y;                last_z = z;            }        }    });